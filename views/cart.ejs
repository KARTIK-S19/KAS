<%- include('./partials/header') %>
  

<script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {},
      },
    }
  </script>



<% if(user.cart.length > 0){  %>
    <% user.cart.forEach((product , index)=>{ %>
        <% 
            const platformFee = 20;
            const totalAmount = product.price - product.discount + platformFee; 
        %>

        <div class="w-full h-screen flex items-start px-20 py-20 gap-10">
                <div class="w-[30%] rounded-md overflow-hidden">
                    <div class="w-fit h-fit bg-zinc-300">
                        <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="">
                    </div>
                    <div class="w-full flex justify-between px-5 py-4 bg-zinc-300">
                        <h3 class="text-2xl"><%= product.name %></h3>
                        <div class="flex items-center gap-2 ">
                            <i class="w-7 h-7 bg-white flex rounded-full items-center justify-center ri-add-line"></i>
                            <div class="px-2 py-1 rounded-md bg-white text-black">01</div>
                            <i class="w-7 h-7 bg-white flex rounded-full items-center justify-center ri-subtract-line"></i>
                        </div>
                    </div>
                    <div class="flex items-center justify-between px-5 py-3 bg-zinc-400">
                        <h4 class="text-lg">Net Total</h4>
                        <h2 class="text-lg">₹ <%= totalAmount %></h2>
                    </div>
                </div>
                
                <div class="w-[70%]">
                    <div class=" w-full h-fit place-content-between flex">

                        <h3 class="text-xl">Price Breakdown</h3>
                        <form action="/removefromcart/<%= product._id %>" method="post">
                            <button type="submit" class="px-4 py-2 text-red-800 rounded-[10rem] hover: text-red-500 "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                                <path d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z" />
                                <path fill-rule="evenodd" d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.133 2.845a.75.75 0 0 1 1.06 0l1.72 1.72 1.72-1.72a.75.75 0 1 1 1.06 1.06l-1.72 1.72 1.72 1.72a.75.75 0 1 1-1.06 1.06L12 15.685l-1.72 1.72a.75.75 0 1 1-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                              </svg>
                              </button>
                        </form>
                    </div>

                    <div class="px-10 mt-5">
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Total MRP</h4>
                            <h4>₹ <%= product.price %> </h4> 
                        </div>
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Discount on MRP</h4>
                            <h4>₹ <%= product.discount %> </h4>
                        </div>
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Platform Fee</h4>
                            <h4>₹ 20</h4>
                        </div>
                        <div class="flex mt-2">
                            <h4 class="w-1/3">Shipping Fee</h4>
                            <h4>FREE</h4>
                        </div>
                    </div>
                    <div class="w-full h-[1px] bg-black mt-10"></div>
                    <div class="flex mt-5">
                        <h3 class="w-1/3 text-xl">Total Amount</h3>
                        <h3 class="font-semibold text-xl text-green-600">₹ <%= totalAmount %></h3>
                    </div>
                </div>
            </div>


    <% }); %>
<% } else {  %>
    <div class="py-32 px-20 flex flex-col gap-2 text-center">
        <img class="w-[150px] h-fit object-cover m-auto" src="/images/360_F_167440913_ai5ZyrlREVCvAwYvT04cJ8R2Ctwe6EUW-removebg-preview.png" alt="img">
        <div class="flex flex-col">
            <h1 class=" text-xl text-zinc-900 text-bold">Hey, your bag feels so light!</h1>
            <h2 class=" text-zinc-900">Let’s add some items in your bag</h2>
        </div>
        <a href="/shop" class="px-28 w-[500px] rounded-xl py-3 mt-2 bg-zinc-600 text-white m-auto">START SHOPPING</a>
    </div>

<%  } %>

